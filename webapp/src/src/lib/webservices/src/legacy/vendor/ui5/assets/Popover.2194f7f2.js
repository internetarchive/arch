var H=Object.defineProperty,N=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var O=(r,t,e)=>t in r?H(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,M=(r,t)=>{for(var e in t||(t={}))G.call(t,e)&&O(r,e,t[e]);if(A)for(var e of A(t))R.call(t,e)&&O(r,e,t[e]);return r},I=(r,t)=>N(r,W(t));import{J as b,ac as D,ad as F,ae as j,af as X,l as y,q as v,t as B,f as T,r as C,h as S,j as Y,P as q,v as K,w as U,ag as J,I as k,ah as Q}from"./PopupsCommon.css.7a5d0307.js";class P extends b{static isValid(t){return Number.isInteger(t)}static attributeToProperty(t){return parseInt(t)}}const x={Left:"Left",Right:"Right",Top:"Top",Bottom:"Bottom"};class i extends b{static isValid(t){return!!x[t]}}i.generateTypeAccessors(x);const L={Center:"Center",Top:"Top",Bottom:"Bottom",Stretch:"Stretch"};class g extends b{static isValid(t){return!!L[t]}}g.generateTypeAccessors(L);const E={Center:"Center",Left:"Left",Right:"Right",Stretch:"Stretch"};class d extends b{static isValid(t){return!!E[t]}}d.generateTypeAccessors(E);let $=null;const Z=300,p=[],_=r=>{p.forEach(t=>{t.instance.reposition()})},z=()=>{document.body.addEventListener("scroll",_,!0)},tt=()=>{document.body.removeEventListener("scroll",_,!0)},et=()=>{$=setInterval(()=>{_()},Z)},ot=()=>{clearInterval($)},rt=()=>{document.addEventListener("mousedown",V)},st=()=>{document.removeEventListener("mousedown",V)},V=r=>{const t=j(),e=t[t.length-1].instance.showAt;if(!(t.length===0||!e))for(let o=t.length-1;o!==-1;o--){const s=t[o].instance;if(s.isModal||s.isOpenerClicked(r))return;if(X(r,s.getBoundingClientRect()))break;s.close()}},at=r=>{r&&r.shadowRoot.addEventListener("scroll",_,!0)},it=r=>{r&&r.shadowRoot.removeEventListener("scroll",_)},nt=r=>{const t=ht(r);D(r,t),p.push({instance:r,parentPopovers:t}),at(r),p.length===1&&(z(),rt(),et())},lt=r=>{const t=[r];for(let e=0;e<p.length;e++){const o=p[e].parentPopovers.indexOf(r);p[e].parentPopovers.length>0&&o>-1&&t.push(p[e].instance)}for(let e=t.length-1;e>=0;e--)for(let o=0;o<p.length;o++){let s;t[e]===p[o].instance&&(s=o),s>=0&&(F(p[s].instance),it(p[s].instance),p.splice(s,1)[0].instance.close(!1,!0))}p.length||(tt(),st(),ot())},ht=r=>{let t=r.parentNode;const e=[];for(;t.parentNode;){for(let o=0;o<p.length;o++)t&&t===p[o].instance&&e.push(t);t=t.parentNode}return e},pt=(r,t,e)=>y`<section style="${v(r.styles.root)}" class="${B(r.classes.root)}" role="dialog" aria-modal="${T(r._ariaModal)}" aria-label="${T(r._ariaLabel)}" aria-labelledby="${T(r._ariaLabelledBy)}" dir="${T(r.effectiveDir)}" @keydown=${r._onkeydown} @focusout=${r._onfocusout} @mouseup=${r._onmouseup} @mousedown=${r._onmousedown}><span class="first-fe" data-ui5-focus-trap tabindex="0" @focusin=${r.forwardToLast}></span><span class="ui5-popover-arrow" style="${v(r.styles.arrow)}"></span>${r._displayHeader?ct(r):void 0}<div style="${v(r.styles.content)}" class="${B(r.classes.content)}"  @scroll="${r._scroll}" part="content"><slot></slot></div>${r._displayFooter?mt(r):void 0}<span class="last-fe" data-ui5-focus-trap tabindex="0" @focusin=${r.forwardToFirst}></span></section> `,ct=(r,t,e)=>y`<header class="ui5-popup-header-root" id="ui5-popup-header" part="header">${r.header.length?dt():ut(r)}</header>`,dt=(r,t,e)=>y`<slot name="header"></slot>`,ut=(r,t,e)=>y`<h2 class="ui5-popup-header-text">${T(r.headerText)}</h2>`,mt=(r,t,e)=>y`${r.footer.length?ft():void 0}`,ft=(r,t,e)=>y`<footer class="ui5-popup-footer-root"  part="footer"><slot name="footer"></slot></footer>`;C("@ui5/webcomponents-theming","sap_fiori_3",()=>S);C("@ui5/webcomponents","sap_fiori_3",()=>Y);var gt={packageName:"@ui5/webcomponents",fileName:"themes/Popover.css",content:'.ui5-popover-arrow{pointer-events:none;display:block;width:1rem;height:1rem;position:absolute;overflow:hidden}.ui5-popover-arrow:after{content:"";display:block;width:.7rem;height:.7rem;background-color:var(--sapGroup_ContentBackground);box-shadow:var(--sapContent_Shadow3);transform:rotate(-45deg)}:host{max-width:calc(100% - var(--_ui5_popup_viewport_margin)*2)}:host([opened][actual-placement-type=Top]){margin-top:var(--_ui5-popover-margin-bottom)}:host([opened][actual-placement-type=Bottom]){margin-top:var(--_ui5-popover-margin-top)}:host([actual-placement-type=Bottom]) .ui5-popover-arrow{left:calc(50% - .5625rem);top:-.5rem;height:.5625rem}:host([actual-placement-type=Bottom]) .ui5-popover-arrow:after{margin:.1875rem 0 0 .1875rem}:host([actual-placement-type=Left]) .ui5-popover-arrow{top:calc(50% - .5625rem);right:-.5625rem;width:.5625rem}:host([actual-placement-type=Left]) .ui5-popover-arrow:after{margin:.1875rem 0 0 -.375rem}:host([actual-placement-type=Left]) [dir=rtl] .ui5-popover-arrow:after{margin:.1875rem .25rem 0 0}:host([actual-placement-type=Bottom]) [dir=rtl] .ui5-popover-arrow:after{margin:.1875rem .125rem 0 0}:host([actual-placement-type=Top]) [dir=rtl] .ui5-popover-arrow:after{margin:-.4375rem .125rem 0 0}:host([actual-placement-type=Top]) .ui5-popover-arrow{left:calc(50% - .5625rem);height:.5625rem;top:100%}:host([actual-placement-type=Top]) .ui5-popover-arrow:after{margin:-.375rem 0 0 .125rem}:host(:not([actual-placement-type])) .ui5-popover-arrow,:host([actual-placement-type=Right]) .ui5-popover-arrow{left:-.5625rem;top:calc(50% - .5625rem);width:.5625rem;height:1rem}:host(:not([actual-placement-type])) .ui5-popover-arrow:after,:host([actual-placement-type=Right]) .ui5-popover-arrow:after{margin:.125rem 0 0 .25rem}:host(:not([actual-placement-type])) [dir=rtl] .ui5-popover-arrow:after,:host([actual-placement-type=Right]) [dir=rtl] .ui5-popover-arrow:after{margin:.1875rem -.375rem 0 0}:host([hide-arrow]) .ui5-popover-arrow{display:none}.ui5-popover-root{min-width:6.25rem}'};const wt=8,yt={tag:"ui5-popover",properties:{headerText:{type:String},placementType:{type:i,defaultValue:i.Right},horizontalAlign:{type:d,defaultValue:d.Center},verticalAlign:{type:g,defaultValue:g.Center},modal:{type:Boolean},hideBackdrop:{type:Boolean},hideArrow:{type:Boolean},allowTargetOverlap:{type:Boolean},opener:{type:String},disableScrolling:{type:Boolean},arrowTranslateX:{type:P,defaultValue:0,noAttribute:!0},arrowTranslateY:{type:P,defaultValue:0,noAttribute:!0},actualPlacementType:{type:i,defaultValue:i.Right},_maxHeight:{type:P,noAttribute:!0},_maxWidth:{type:P,noAttribute:!0}},managedSlots:!0,slots:{header:{type:HTMLElement},footer:{type:HTMLElement}},events:{}};class u extends q{constructor(){super()}static get metadata(){return yt}static get styles(){return[K,U,gt]}static get template(){return pt}static get VIEWPORT_MARGIN(){return 10}static get ARROW_MARGIN(){return 6}onAfterRendering(){if(!this.isOpen()&&this.open){const t=document.getElementById(this.opener);if(!t){console.warn("Valid opener id is required.");return}this.showAt(t)}else this.isOpen()&&!this.open&&this.close()}isOpenerClicked(t){const e=t.target;return e===this._opener||e.getFocusDomRef&&e.getFocusDomRef()===this._opener||t.composedPath().indexOf(this._opener)>-1}async showAt(t,e=!1){!t||this.opened||(this._opener=t,this._openerRect=t.getBoundingClientRect(),await super._open(e))}_addOpenedPopup(){nt(this)}_removeOpenedPopup(){lt(this)}shouldCloseDueToOverflow(t,e){const o=32,s={Right:e.right,Left:e.left,Top:e.top,Bottom:e.bottom},a=J(this._opener);let n=!1,l=!1;if(a.showAt){const h=a.contentDOM.getBoundingClientRect();n=e.top>h.top+h.height,l=e.top+e.height<h.top}return s[t]<0||s[t]+o>a.innerHeight||n||l}shouldCloseDueToNoOpener(t){return t.top===0&&t.bottom===0&&t.left===0&&t.right===0}_resize(){super._resize(),this.opened&&this.reposition()}reposition(){this._show()}_show(){let t;const e=this.getPopoverSize();if(e.width===0||e.height===0)return;this.isOpen()&&(this._openerRect=this._opener.getBoundingClientRect()),this.shouldCloseDueToNoOpener(this._openerRect)&&this.isFocusWithin()?t=this._oldPlacement:t=this.calcPlacement(this._openerRect,e);const o=this.horizontalAlign===d.Stretch;if(this._preventRepositionAndClose)return this.close();this._oldPlacement=t,this.actualPlacementType=t.placementType;let s=k(this._left,u.VIEWPORT_MARGIN,document.documentElement.clientWidth-e.width-u.VIEWPORT_MARGIN);this.actualPlacementType===i.Right&&(s=Math.max(s,this._left));let a=k(this._top,u.VIEWPORT_MARGIN,document.documentElement.clientHeight-e.height-u.VIEWPORT_MARGIN);this.actualPlacementType===i.Bottom&&(a=Math.max(a,this._top));const n=this.actualPlacementType===i.Top||this.actualPlacementType===i.Bottom,l=Number.parseInt(window.getComputedStyle(this).getPropertyValue("border-radius")),h=this._clampArrowPlacement(t.arrow,n,this._top,this._left,e,l);this.arrowTranslateX=h.x,this.arrowTranslateY=h.y,a=this._adjustForIOSKeyboard(a),Object.assign(this.style,{top:`${a}px`,left:`${s}px`}),super._show(),o&&this._width&&(this.style.width=this._width)}_clampArrowPlacement({x:t,y:e},o,s,a,{width:n,height:l},h){const w=this._getArrowRange(l,h),f=this._getArrowRange(n,h);if(o){const m=u.VIEWPORT_MARGIN-a,c=a+n+u.VIEWPORT_MARGIN-document.documentElement.clientWidth;m>0?t=Math.max(t-m,-f):c>0&&(t=Math.min(t+c,f))}if(!o){const m=u.VIEWPORT_MARGIN-s,c=s+l+u.VIEWPORT_MARGIN-document.documentElement.clientHeight;m>0?e=Math.max(e-m,-w):c>0&&(e=Math.min(e+c,w))}return{x:Math.round(t),y:Math.round(e)}}_getArrowRange(t,e){return Math.floor(t/2-(e+u.ARROW_MARGIN))}_adjustForIOSKeyboard(t){if(!Q())return t;const e=Math.ceil(this.getBoundingClientRect().top);return t+(Number.parseInt(this.style.top||"0")-e)}getPopoverSize(){this.opened||Object.assign(this.style,{display:"block",top:"-10000px",left:"-10000px"});const t=this.getBoundingClientRect(),e=t.width,o=t.height;return{width:e,height:o}}get contentDOM(){return this.shadowRoot.querySelector(".ui5-popup-content")}get arrowDOM(){return this.shadowRoot.querySelector(".ui5-popover-arrow")}calcPlacement(t,e){let o=0,s=0;const a=this.allowTargetOverlap,n=document.documentElement.clientWidth,l=document.documentElement.clientHeight;let h=l,w=n;const f=this.getActualPlacementType(t,e);this._preventRepositionAndClose=this.shouldCloseDueToNoOpener(t)||this.shouldCloseDueToOverflow(f,t);const m=f===i.Top||f===i.Bottom;this.horizontalAlign===d.Stretch&&m?(e.width=t.width,this._width=`${t.width}px`):this.verticalAlign===g.Stretch&&!m&&(e.height=t.height);const c=this.hideArrow?0:wt;switch(f){case i.Top:o=this.getVerticalLeft(t,e),s=Math.max(t.top-e.height-c,0),a||(h=t.top-c);break;case i.Bottom:o=this.getVerticalLeft(t,e),s=t.bottom+c,a?s=Math.max(Math.min(s,l-e.height),0):h=l-t.bottom-c;break;case i.Left:o=Math.max(t.left-e.width-c,0),s=this.getHorizontalTop(t,e),a||(w=t.left-c);break;case i.Right:o=t.left+t.width+c,s=this.getHorizontalTop(t,e),a?o=Math.max(Math.min(o,n-e.width),0):w=n-t.right-c;break}return m?e.width>n||o<0?o=0:o+e.width>n&&(o-=o+e.width-n):e.height>l||s<0?s=0:s+e.height>l&&(s-=s+e.height-l),this._maxHeight=Math.round(h-u.VIEWPORT_MARGIN),this._maxWidth=Math.round(w-u.VIEWPORT_MARGIN),(this._left===void 0||Math.abs(this._left-o)>1.5)&&(this._left=Math.round(o)),(this._top===void 0||Math.abs(this._top-s)>1.5)&&(this._top=Math.round(s)),{arrow:this.getArrowPosition(t,e,o,s,m),top:this._top,left:this._left,placementType:f}}getArrowPosition(t,e,o,s,a){let n=this.horizontalAlign===d.Center||this.horizontalAlign===d.Stretch;this.horizontalAlign===d.Right&&o<=t.left&&(n=!0),this.horizontalAlign===d.Left&&o+e.width>=t.left+t.width&&(n=!0);let l=0;a&&n&&(l=t.left+t.width/2-o-e.width/2);let h=0;return a||(h=t.top+t.height/2-s-e.height/2),{x:Math.round(l),y:Math.round(h)}}fallbackPlacement(t,e,o,s){if(o.left>s.width)return i.Left;if(t-o.right>o.left)return i.Right;if(e-o.bottom>s.height)return i.Bottom;if(e-o.bottom<o.top)return i.Top}getActualPlacementType(t,e){const o=this.placementType;let s=o;const a=document.documentElement.clientWidth,n=document.documentElement.clientHeight;switch(o){case i.Top:t.top<e.height&&t.top<n-t.bottom&&(s=i.Bottom);break;case i.Bottom:n-t.bottom<e.height&&n-t.bottom<t.top&&(s=i.Top);break;case i.Left:t.left<e.width&&(s=this.fallbackPlacement(a,n,t,e)||o);break;case i.Right:a-t.right<e.width&&(s=this.fallbackPlacement(a,n,t,e)||o);break}return s}getVerticalLeft(t,e){let o;switch(this.horizontalAlign){case d.Center:case d.Stretch:o=t.left-(e.width-t.width)/2;break;case d.Left:o=t.left;break;case d.Right:o=t.right-e.width;break}return o}getHorizontalTop(t,e){let o;switch(this.verticalAlign){case g.Center:case g.Stretch:o=t.top-(e.height-t.height)/2;break;case g.Top:o=t.top;break;case g.Bottom:o=t.bottom-e.height;break}return o}get isModal(){return this.modal}get shouldHideBackdrop(){return this.hideBackdrop}get _ariaLabelledBy(){return this._ariaLabel?void 0:"ui5-popup-header"}get _ariaModal(){return!0}get styles(){return I(M({},super.styles),{root:{"max-height":`${this._maxHeight}px`,"max-width":`${this._maxWidth}px`},arrow:{transform:`translate(${this.arrowTranslateX}px, ${this.arrowTranslateY}px)`}})}get classes(){const t=super.classes;return t.root["ui5-popover-root"]=!0,t}get _displayHeader(){return this.header.length||this.headerText}get _displayFooter(){return!0}}u.define();export{P as I,u as P};
