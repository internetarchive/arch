{"version":3,"file":"arch-collection-details-dataset-table-359e7b49.js","sources":["../../../src/src/archCollectionDetailsDatasetTable/src/styles.ts","../../../src/src/archCollectionDetailsDatasetTable/src/arch-collection-details-dataset-table.ts"],"sourcesContent":["import { css } from \"lit\";\n\nexport default [\n  css`\n    data-table > .paginator-wrapper {\n      display: none;\n    }\n\n    data-table > table {\n      table-layout: fixed;\n    }\n\n    data-table > table > thead > tr > th.category {\n      width: 7em;\n    }\n\n    data-table > table > thead > tr > th.sample {\n      width: 6em;\n    }\n\n    data-table > table > thead > tr > th.state {\n      width: 7em;\n    }\n\n    data-table > table > thead > tr > th.started {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th.finished {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th.files {\n      width: 3em;\n    }\n\n    data-table > table > thead > tr > th {\n      max-width: none;\n    }\n  `,\n];\n","import { PropertyValues } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\n\nimport { ArchDataTable } from \"../../archDataTable/index\";\nimport { Dataset } from \"../../lib/types\";\nimport { Topics } from \"../../lib/pubsub\";\nimport { Paths } from \"../../lib/helpers\";\nimport { ProcessingState } from \"../../lib/types\";\nimport Styles from \"./styles\";\n\n@customElement(\"arch-collection-details-dataset-table\")\nexport class ArchCollectionDetailsDatasetTable extends ArchDataTable<Dataset> {\n  @property({ type: String }) collectionId!: string;\n\n  @state() columnNameHeaderTooltipMap = {\n    category:\n      \"Dataset categories are Collection, Network, Text, and File Format\",\n    sample:\n      \"Sample datasets contain only the first 100 available records from a collection\",\n  };\n\n  static styles = [...ArchDataTable.styles, ...Styles];\n\n  willUpdate(_changedProperties: PropertyValues) {\n    super.willUpdate(_changedProperties);\n\n    this.apiCollectionEndpoint = \"/datasets\";\n    this.apiItemResponseIsArray = true;\n    this.apiItemTemplate =\n      \"/datasets?collectionId=:collectionId&job=:jobId&sample=:isSample\";\n    this.itemPollPredicate = (item) => item.state === ProcessingState.Running;\n    this.itemPollPeriodSeconds = 3;\n    this.apiStaticParamPairs = [\n      [\"collectionId\", this.collectionId],\n      [\"state!\", ProcessingState.NotStarted],\n    ];\n    this.cellRenderers = [\n      (name, dataset) =>\n        dataset.state !== ProcessingState.Finished\n          ? `${name as string}`\n          : `<a href=\"${Paths.dataset(dataset.id, dataset.sample)}\">${\n              name as string\n            }</a>`,\n      undefined,\n      (sample) => ((sample as Dataset[\"sample\"]) === -1 ? \"No\" : \"Yes\"),\n      undefined,\n      (startTime) => (startTime as string)?.slice(0, -3),\n      (finishedTime, dataset) =>\n        dataset.state === ProcessingState.Running\n          ? \"\"\n          : (finishedTime as string)?.slice(0, -3),\n    ];\n    this.columnFilterDisplayMaps = [\n      undefined,\n      undefined,\n      { 100: \"Yes\", [-1]: \"No\" },\n    ];\n    this.columns = [\n      \"name\",\n      \"category\",\n      \"sample\",\n      \"state\",\n      \"startTime\",\n      \"finishedTime\",\n      \"numFiles\",\n    ];\n    this.columnHeaders = [\n      \"Dataset\",\n      \"Category\",\n      \"Sample\",\n      \"State\",\n      \"Started\",\n      \"Finished\",\n      \"Files\",\n    ];\n    this.filterableColumns = [true, true, true, true, false, false, false];\n    this.nonSelectionActionLabels = [\"Generate a New Dataset\"];\n    this.nonSelectionActions = [Topics.GENERATE_DATASET];\n    this.singleName = \"Dataset\";\n    this.sort = \"-startTime\";\n    this.sortableColumns = [true, true, true, true, true, true, true];\n    this.pluralName = \"Datasets\";\n  }\n\n  nonSelectionActionHandler(action: string) {\n    switch (action) {\n      case Topics.GENERATE_DATASET:\n        window.location.href = Paths.generateCollectionDataset(\n          this.collectionId\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n\n// Injects the tag into the global name space\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"arch-collection-details-dataset-table\": ArchCollectionDetailsDatasetTable;\n  }\n}\n"],"names":["Styles","css","ArchCollectionDetailsDatasetTable","ArchDataTable","constructor","this","columnNameHeaderTooltipMap","category","sample","willUpdate","_changedProperties","super","apiCollectionEndpoint","apiItemResponseIsArray","apiItemTemplate","itemPollPredicate","item","state","ProcessingState","Running","itemPollPeriodSeconds","apiStaticParamPairs","collectionId","NotStarted","cellRenderers","name","dataset","Finished","Paths","id","undefined","startTime","slice","finishedTime","columnFilterDisplayMaps","columns","columnHeaders","filterableColumns","nonSelectionActionLabels","nonSelectionActions","Topics","GENERATE_DATASET","singleName","sort","sortableColumns","pluralName","nonSelectionActionHandler","action","window","location","href","generateCollectionDataset","styles","__decorate","property","type","String","prototype","customElement"],"mappings":"+kBAEA,IAAeA,EAAA,CACbC,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCQE,IAAMC,EAAN,cAAgDC,EAAhDC,kCAGIC,KAAAC,2BAA6B,CACpCC,SACE,oEACFC,OACE,iFA6EL,CAxECC,WAAWC,GACTC,MAAMF,WAAWC,GAEjBL,KAAKO,sBAAwB,YAC7BP,KAAKQ,wBAAyB,EAC9BR,KAAKS,gBACH,mEACFT,KAAKU,kBAAqBC,GAASA,EAAKC,QAAUC,EAAgBC,QAClEd,KAAKe,sBAAwB,EAC7Bf,KAAKgB,oBAAsB,CACzB,CAAC,eAAgBhB,KAAKiB,cACtB,CAAC,SAAUJ,EAAgBK,aAE7BlB,KAAKmB,cAAgB,CACnB,CAACC,EAAMC,IACLA,EAAQT,QAAUC,EAAgBS,SAC9B,GAAGF,IACH,YAAYG,EAAMF,QAAQA,EAAQG,GAAIH,EAAQlB,YAC5CiB,aAERK,EACCtB,IAA+C,IAAlCA,EAAsC,KAAO,WAC3DsB,EACCC,GAAeA,aAAS,EAATA,EAAsBC,MAAM,GAAI,GAChD,CAACC,EAAcP,IACbA,EAAQT,QAAUC,EAAgBC,QAC9B,GACCc,aAAA,EAAAA,EAAyBD,MAAM,GAAI,IAE5C3B,KAAK6B,wBAA0B,MAC7BJ,OACAA,EACA,CAAE,IAAK,MAAO,EAAE,GAAI,OAEtBzB,KAAK8B,QAAU,CACb,OACA,WACA,SACA,QACA,YACA,eACA,YAEF9B,KAAK+B,cAAgB,CACnB,UACA,WACA,SACA,QACA,UACA,WACA,SAEF/B,KAAKgC,kBAAoB,EAAC,GAAM,GAAM,GAAM,GAAM,GAAO,GAAO,GAChEhC,KAAKiC,yBAA2B,CAAC,0BACjCjC,KAAKkC,oBAAsB,CAACC,EAAOC,kBACnCpC,KAAKqC,WAAa,UAClBrC,KAAKsC,KAAO,aACZtC,KAAKuC,gBAAkB,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC5DvC,KAAKwC,WAAa,UACnB,CAEDC,0BAA0BC,GACxB,GAAQA,IACDP,EAAOC,iBACVO,OAAOC,SAASC,KAAOtB,EAAMuB,0BAC3B9C,KAAKiB,aAMZ,GAzEMpB,EAAMkD,OAAG,IAAIjD,EAAciD,UAAWpD,GATjBqD,EAAA,CAA3BC,EAAS,CAAEC,KAAMC,UAAgCtD,EAAAuD,UAAA,oBAAA,GAEzCJ,EAAA,CAARpC,KAKCf,EAAAuD,UAAA,kCAAA,GARSvD,EAAiCmD,EAAA,CAD7CK,EAAc,0CACFxD"}