{"version":3,"file":"arch-dataset-explorer-table-f776706e.js","sources":["../../../src/src/archDatasetExplorerTable/src/styles.ts","../../../src/src/archDatasetExplorerTable/src/arch-dataset-explorer-table.ts"],"sourcesContent":["import { css } from \"lit\";\n\nexport default [\n  css`\n    data-table {\n      min-width: 60rem;\n    }\n\n    data-table > table {\n      table-layout: fixed;\n    }\n\n    data-table > table > thead > tr > th.category {\n      width: 8em;\n    }\n\n    data-table > table > thead > tr > th.sample {\n      width: 7em;\n    }\n\n    data-table > table > thead > tr > th.state {\n      width: 6em;\n    }\n\n    data-table > table > thead > tr > th.started {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th.finished {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th.files {\n      width: 3em;\n    }\n\n    data-table > table > thead > tr > th {\n      max-width: none;\n    }\n  `,\n];\n","import { PropertyValues } from \"lit\";\nimport { customElement } from \"lit/decorators.js\";\n\nimport { ArchDataTable } from \"../../archDataTable/index\";\nimport { Dataset, ProcessingState } from \"../../lib/types\";\nimport { Paths } from \"../../lib/helpers\";\nimport Styles from \"./styles\";\n\n@customElement(\"arch-dataset-explorer-table\")\nexport class ArchDatasetExplorerTable extends ArchDataTable<Dataset> {\n  static styles = [...ArchDataTable.styles, ...Styles];\n\n  willUpdate(_changedProperties: PropertyValues) {\n    super.willUpdate(_changedProperties);\n\n    this.apiCollectionEndpoint = \"/datasets\";\n    this.apiItemResponseIsArray = true;\n    this.apiItemTemplate =\n      \"/datasets?collectionId=:collectionId&job=:jobId&sample=:isSample\";\n    this.itemPollPredicate = (item) => item.state === ProcessingState.Running;\n    this.itemPollPeriodSeconds = 3;\n    this.apiStaticParamPairs = [[\"state!\", ProcessingState.NotStarted]];\n    this.cellRenderers = [\n      (name, dataset) =>\n        dataset.state !== ProcessingState.Finished\n          ? `${dataset.name}`\n          : `<a href=\"${Paths.dataset(dataset.id, dataset.sample)}\">\n               <span class=\"highlightable\">${dataset.name}</span>\n            </a>`,\n      undefined,\n      (collectionName, dataset) =>\n        `<a href=\"${Paths.collection(dataset.collectionId)}\">\n           <span class=\"highlightable\">${collectionName as string}</span>\n        </a>`,\n      (sample) => ((sample as Dataset[\"sample\"]) === -1 ? \"No\" : \"Yes\"),\n      undefined,\n      (startTime) => (startTime as string)?.slice(0, -3),\n      (finishedTime, dataset) =>\n        dataset.state === ProcessingState.Running\n          ? \"\"\n          : (finishedTime as string)?.slice(0, -3),\n    ];\n    this.columnFilterDisplayMaps = [\n      undefined,\n      undefined,\n      undefined,\n      { 100: \"Yes\", [-1]: \"No\" },\n    ];\n    this.columns = [\n      \"name\",\n      \"category\",\n      \"collectionName\",\n      \"sample\",\n      \"state\",\n      \"startTime\",\n      \"finishedTime\",\n      \"numFiles\",\n    ];\n    this.columnHeaders = [\n      \"Dataset\",\n      \"Category\",\n      \"Collection\",\n      \"Sample\",\n      \"State\",\n      \"Started\",\n      \"Finished\",\n      \"Files\",\n    ];\n    this.filterableColumns = [\n      true,\n      true,\n      true,\n      true,\n      true,\n      false,\n      false,\n      false,\n    ];\n    this.searchColumns = [\"name\", \"category\", \"collectionName\", \"state\"];\n    this.searchColumnLabels = [\"Name\", \"Category\", \"Collection\", \"State\"];\n    this.singleName = \"Dataset\";\n    this.sort = \"-startTime\";\n    this.sortableColumns = [true, true, true, true, true, true, true, true];\n    this.persistSearchStateInUrl = true;\n    this.pluralName = \"Datasets\";\n  }\n}\n\n// Injects the tag into the global name space\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"arch-dataset-explorer-table\": ArchDatasetExplorerTable;\n  }\n}\n"],"names":["Styles","css","ArchDatasetExplorerTable","ArchDataTable","willUpdate","_changedProperties","super","this","apiCollectionEndpoint","apiItemResponseIsArray","apiItemTemplate","itemPollPredicate","item","state","ProcessingState","Running","itemPollPeriodSeconds","apiStaticParamPairs","NotStarted","cellRenderers","name","dataset","Finished","Paths","id","sample","undefined","collectionName","collection","collectionId","startTime","slice","finishedTime","columnFilterDisplayMaps","columns","columnHeaders","filterableColumns","searchColumns","searchColumnLabels","singleName","sort","sortableColumns","persistSearchStateInUrl","pluralName","styles","__decorate","customElement"],"mappings":"0ZAEA,IAAeA,EAAA,CACbC,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCME,IAAMC,EAAN,cAAuCC,EAG5CC,WAAWC,GACTC,MAAMF,WAAWC,GAEjBE,KAAKC,sBAAwB,YAC7BD,KAAKE,wBAAyB,EAC9BF,KAAKG,gBACH,mEACFH,KAAKI,kBAAqBC,GAASA,EAAKC,QAAUC,EAAgBC,QAClER,KAAKS,sBAAwB,EAC7BT,KAAKU,oBAAsB,CAAC,CAAC,SAAUH,EAAgBI,aACvDX,KAAKY,cAAgB,CACnB,CAACC,EAAMC,IACLA,EAAQR,QAAUC,EAAgBQ,SAC9B,GAAGD,EAAQD,OACX,YAAYG,EAAMF,QAAQA,EAAQG,GAAIH,EAAQI,yDACbJ,EAAQD,qCAE/CM,EACA,CAACC,EAAgBN,IACf,YAAYE,EAAMK,WAAWP,EAAQQ,2DACJF,yBAElCF,IAA+C,IAAlCA,EAAsC,KAAO,WAC3DC,EACCI,GAAeA,aAAS,EAATA,EAAsBC,MAAM,GAAI,GAChD,CAACC,EAAcX,IACbA,EAAQR,QAAUC,EAAgBC,QAC9B,GACCiB,aAAA,EAAAA,EAAyBD,MAAM,GAAI,IAE5CxB,KAAK0B,wBAA0B,MAC7BP,OACAA,OACAA,EACA,CAAE,IAAK,MAAO,EAAE,GAAI,OAEtBnB,KAAK2B,QAAU,CACb,OACA,WACA,iBACA,SACA,QACA,YACA,eACA,YAEF3B,KAAK4B,cAAgB,CACnB,UACA,WACA,aACA,SACA,QACA,UACA,WACA,SAEF5B,KAAK6B,kBAAoB,EACvB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAEF7B,KAAK8B,cAAgB,CAAC,OAAQ,WAAY,iBAAkB,SAC5D9B,KAAK+B,mBAAqB,CAAC,OAAQ,WAAY,aAAc,SAC7D/B,KAAKgC,WAAa,UAClBhC,KAAKiC,KAAO,aACZjC,KAAKkC,gBAAkB,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAClElC,KAAKmC,yBAA0B,EAC/BnC,KAAKoC,WAAa,UACnB,GA3EMzC,EAAM0C,OAAG,IAAIzC,EAAcyC,UAAW5C,GADlCE,EAAwB2C,EAAA,CADpCC,EAAc,gCACF5C"}